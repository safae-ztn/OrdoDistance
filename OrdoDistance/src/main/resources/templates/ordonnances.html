<!DOCTYPE html>
<html lang="fr">

    <head>
      <meta charset="UTF-8" />
      <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link th:href="@{/css/bootstrap-theme.css}" rel="stylesheet" />
      <link href="css/font-awesome.min.css" rel="stylesheet" />
      <link href="css/style2.css" rel="stylesheet" />
      <link href="css/style-responsive.css" rel="stylesheet" />

      <link
        href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/all.css"
        rel="stylesheet"
        type="text/css"
      />

      <link rel="stylesheet" th:href="@{/css/style.css}" />
      <title>Ordodistance</title>

      <style>

        h1 {
  text-align: center;
  font-family: Tahoma, Arial, sans-serif;
  color: #06D85F;
  margin: 80px 0;
}

.box {
  width: 40%;
  margin: 0 auto;
  background: rgba(255,255,255,0.2);
  padding: 35px;
  border: 2px solid #fff;
  border-radius: 20px/50px;
  background-clip: padding-box;
  text-align: center;
}

.button {
  font-size: 1em;
  padding: 10px;
  color: #fff;
  border: 2px solid #06D85F;
  border-radius: 20px/50px;
  text-decoration: none;
  cursor: pointer;
  transition: all 0.3s ease-out;
}
.button:hover {
  background: #06D85F;
}

.overlay {
  position: fixed;
  z-index:4;
  top: 0;
  bottom: 0;
  left: 0;
  right: 0;
  background: rgba(0, 0, 0, 0.7);
  transition: opacity 500ms;
  visibility: hidden;
  opacity: 0;
}
.overlay:target {
  visibility: visible;
  opacity: 1;
}

.popup {
  margin: 70px auto;
  padding: 20px;
  background: #fff;
  border-radius: 5px;
  width: 30%;
  position: relative;
  transition: all 5s ease-in-out;
}

.popup h2 {
  margin-top: 0;
  color: #333;
  font-family: Tahoma, Arial, sans-serif;
}
.popup .close {
  position: absolute;
  top: 20px;
  right: 30px;
  transition: all 200ms;
  font-size: 30px;
  font-weight: bold;
  text-decoration: none;
  color: #333;
}
.popup .close:hover {
  color: #06D85F;
}
.popup .content {
  max-height: 30%;
  overflow: auto;
}

@media screen and (max-width: 700px){
  .box{
    width: 70%;
  }
  .popup{
    width: 70%;
  }
}
      </style>
    </head>
    <body>
      <!--Nav bar-->
      <header>
        <button>
          <img src="images/logo.png" style="padding-top:0%;margin-bottom:10%" alt="logo" srcset="" />
          <h3>Ordodistance</h3>
        </button>

        <div class="doctor-info">
          <img
            src="images/Doctor.jpg"
            alt=""
            width="30"
            height="30"
          />
          <!--<label for="">Dr.lastName</label>-->
          <p>Dr.</p>
          <label
            class="username"
            th:text="${#authentication.getPrincipal().getLastname()}"
            >Guest</label
          >
          <button>
            <svg
              class="bi bi-plus"
              width="1.5em"
              height="1.5em"
              viewBox="0 0 16 16"
              fill="currentColor"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                fill-rule="evenodd"
                d="M8 3.5a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5H4a.5.5 0 0 1 0-1h3.5V4a.5.5 0 0 1 .5-.5z"
              />
              <path
                fill-rule="evenodd"
                d="M7.5 8a.5.5 0 0 1 .5-.5h4a.5.5 0 0 1 0 1H8.5V12a.5.5 0 0 1-1 0V8z"
              />
            </svg>
          </button>
          <div class="dropdown">
            <button>
              <svg
                class="bi bi-chevron-down"
                width="1.25em"
                height="1.25em"
                viewBox="0 0 16 16"
                fill="currentColor"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  fill-rule="evenodd"
                  d="M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z"
                />
              </svg>
            </button>
            <div class="dropdown-content">
                <a href="#">Profile</a>
                <a th:href="@{/ordonnances}">Mes ordonnances</a>
                <a th:href="@{/patients}">Mes patients</a>
                <a th:href="@{/logout}">Log out</a>
            </div>
          </div>
        </div>
      </header>
      
	 <nav class="breadcrumb" style="padding-bottom:0px">
  <ol>
    <li ><a th:href="@{/firstPage}"><i class="fas fa-home"></i> Home </a></li>
        <li>/</li>
    
    <li class="active"><a th:href="@{/ordonnances}"><i class="fas fa-list"></i> Mes Ordonnances </a></li>
            <li style="color:transparent">/</li>
      </ol>
</nav>
      <main class="main-content ordonnances-list">
     <div class="header-list">
      <h3>  Mes ordonnances :</h3>
      
      <div class="searching-bar">
 <form th:action="@{/ordonnances}" method="get">
                  	<input id="txtSearch" type="text" name="keyword" placeholder="Rechercher dans OrdoDistance">

      	<button class="" type="submit">
              <img
                src="images/search.svg"
                width="15"
                height="25"
                alt="search"
              />
            </button>
          </form>
        </div>
		
		<a href="PatientPage"><i class="fas fa-plus"></i> Ajouter une ordonance</a>
      </div>
      
        <table class="table table-striped table-advance table-hover ordonnances-table">
          <thead class="thead-dark">
            <tr>
              <th>Date</th>
              <th>Maladie</th>
              <th>Patient</th>
              <th>Etat de l'ordonnance</th>
              <th>Traitement</th>
            </tr>
          </thead>
          <tbody>
          
            <tr th:each="ordonnance:${ordonnances}" style="cursor: pointer" 
           >
              <td  th:onclick="'window.location.href = \'' + @{/ordonnances/{id}(id=${ordonnance.id})} + '\''" th:text="${ordonnance.dateo}"></td>
              <td  th:onclick="'window.location.href = \'' + @{/ordonnances/{id}(id=${ordonnance.id})} + '\''" th:text="${ordonnance.Maladie}"></td>
              <td   th:onclick="'window.location.href = \'' + @{/ordonnances/{id}(id=${ordonnance.id})} + '\''" th:text="${ordonnance.patient.CIN}"></td>
              <td>
                <th:block  th:onclick="'window.location.href = \'' + @{/ordonnances/{id}(id=${ordonnance.id})} + '\''" th:if="${ordonnance.sent == false}"
                  >En attente</th:block
                >
                <th:block  th:onclick="'window.location.href = \'' + @{/ordonnances/{id}(id=${ordonnance.id})} + '\''" th:if="${ordonnance.sent == true}">Envoyée</th:block>
              </td>
              <td>
                <div
                  style="
                    display: flex;
                    justify-content: space-between;
                    align-items: center;
                  "
                >
                  <span>
                  <th:block th:if="${ordonnance.sent == false}"
                  > <a
                          class="ordo-operation"
                          id="editButton"
                          th:href="@{/ordonnances/edit/{id}(id=${ordonnance.id})}"
                  ><i class="far fa-edit" title="modifier"></i
                  ></a></th:block
                  >
                  <th:block th:if="${ordonnance.sent == true}"><i style="color:#dfdfdf" class="far fa-edit" title="déja envoyé"></i
                  ></th:block>
                  </span>

                  <a
                    class="ordo-operation"
                    id="archiveButton"
                    href="#popup3"
                    ><i class="fas fa-archive" title="archiver"></i
                  ></a>

                  <div id="popup3" class="overlay">
                    <div class="popup">
                      <h2>Confirmer l'archivage</h2>
                        <br>
                      <a class="close" href="#">&times;</a>
                      <div class="content">
                        Voulez-vous vraiment archiver cette ordonnance?
                      </div><br /><br />
                      <a style="pborder-radius: 40px;
    color: #fff;
        border-radius: 24px;
  background-color:#10225A;
    text-decoration: none;
    border: none;
    font-size: 0.9em;
    padding: 10px;
    margin: 25px 3px;
    cursor: pointer;
    box-shadow: 0 1px 2px 0 rgba(60,64,67,.30), 0 1px 3px 1px rgba(60,64,67,.15);"  th:href="@{/ordonnances/archive/{id}(id=${ordonnance.id})}"
                      >Archiver</a>
                      <a style="pborder-radius: 40px;
    color: #10225A;
        border-radius: 24px;
  background-color:#fff;
    text-decoration: none;
    border: none;
    font-size: 0.9em;
    padding: 10px;
    margin: 25px 3px;
    cursor: pointer;
    box-shadow: 0 1px 2px 0 rgba(60,64,67,.30), 0 1px 3px 1px rgba(60,64,67,.15);"  th:href="@{/ordonnances}">Annuler</a>
                    </div>
                  </div>

                  <a
                    class="ordo-operation"
                    id="cloneButton"
                    th:href="@{/ordonnances/clone/{id}(id=${ordonnance.id})}"
                    ><i class="far fa-copy" title="cloner"></i
                  ></a>

                    <a
                            class="ordo-operation"
                            id="deleteButton"
                            href="#popup4"
                    ><i class="fas fa-trash-alt" title="Supprimer"></i
                    ></a>

                    <div id="popup4" class="overlay">
                        <div class="popup">
                            <h2>Confirmer la suppression</h2>
                            <br />
                            <a class="close" href="#">&times;</a>
                            <div class="content">
                                Voulez-vous vraiment supprimer cette ordonnance?
                            </div><br /><br />
                            <a style="pborder-radius: 40px;
    color: #fff;
        border-radius: 24px;
  background-color:#10225A;
    text-decoration: none;
    border: none;
    font-size: 0.9em;
    padding: 10px;
    margin: 25px 3px;
    cursor: pointer;
    box-shadow: 0 1px 2px 0 rgba(60,64,67,.30), 0 1px 3px 1px rgba(60,64,67,.15);" th:href="@{/ordonnances/delete/{id}(id=${ordonnance.id})}"
                            >Supprimer</a>
                            <a style="pborder-radius: 40px;
    color: #10225A;
        border-radius: 24px;
  background-color:#fff;
    text-decoration: none;
    border: none;
    font-size: 0.9em;
    padding: 10px;
    margin: 25px 3px;
    cursor: pointer;
    box-shadow: 0 1px 2px 0 rgba(60,64,67,.30), 0 1px 3px 1px rgba(60,64,67,.15);" th:href="@{/ordonnances}">Annuler</a>
                        </div>
                    </div>
                </div>
              </td>
            </tr>
          </tbody>
        </table>
      </main>
    </body>
  </html>
</html>
